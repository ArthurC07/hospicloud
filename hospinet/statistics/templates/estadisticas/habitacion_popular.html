{% extends 'base.html' %}
{% load staticfiles %}
{% block content %}
<div class="row">
  <section class="span12">
    <div class="page-header">
      <h1>Estad&iacute;sticas de Habitaciones</h1>
      <small>Del {{ inicio }} al {{ fin }}</small>
    </div>
  </section>
</div>
<div class="row">
 <article class="span6">
    <table class="table table-striped table-bordered">
      <caption>Tiempo de Ocupaci&oacute;n de Habitaciones</caption>
      <thead>
        <tr>
          <th>Habitaci&oacute;n</th>
          <th>D&iacute;as</th>
        </tr>
      <thead>
      <tbody>
       {% for habitacion, dias in habitaciones %}
        <tr>
          <td>{{ habitacion.get_tipo_display }} {{ habitacion.numero }}</td>
          <td>{{ dias }}</td>
        </tr>
       {% endfor %}
      </tbody>
    </table>
  </article>
  <article class="span6">
      <canvas width="300" height="300" id="grafico"></canvas>
  </article>
</div>
{% endblock %}
{% block scripts %}
<script type="text/javascript" src="{% static 'js/Chart.min.js' %}"></script>
<script type="text/javascript">
    $(document).ready(function()
    {

        var data = {
            labels : [ {% for habitacion, dias in habitaciones %} '{{ habitacion }}', {% endfor %} '' ],
            datasets : [
                {
                    fillColor : "rgba(151,187,205,0.5)",
                    strokeColor : "rgba(151,187,205,1)",
                    data : [ {% for habitacion, dias in habitaciones %} {{ dias }}, {% endfor %} 0 ]
                }
            ]
        };
        var ctx = $("#grafico").get(0).getContext("2d");
        var grafico = new Chart(ctx).Bar(data);
    });
</script>
{% endblock %}
